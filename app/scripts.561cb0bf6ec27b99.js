!function(it,Z){"object"==typeof exports&&"undefined"!=typeof module?module.exports=Z():"function"==typeof define&&define.amd?define(Z):(it="undefined"!=typeof globalThis?globalThis:it||self).Cropper=Z()}(this,function(){"use strict";function it(t,e){var i,a=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,i)),a}function Z(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?it(Object(i),!0).forEach(function(a){var n,r;r=i[a=a],a in(n=t)?Object.defineProperty(n,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[a]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):it(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function Ht(t){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function Nt(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Lt(t){return function(e){if(Array.isArray(e))return gt(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,i){var a;if(e)return"string"==typeof e?gt(e,i):"Map"===(a="Object"===(a=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:a)||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?gt(e,i):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}var X=(tt="undefined"!=typeof window&&void 0!==window.document)?window:{},U=!(!tt||!X.document.documentElement)&&"ontouchstart"in X.document.documentElement,I=tt&&"PointerEvent"in X,x="cropper",q="e",$="w",G="s",A="n",at="ne",nt="nw",ot="se",rt="sw",vt="".concat(x,"-crop"),Rt="".concat(x,"-disabled"),H="".concat(x,"-hidden"),St="".concat(x,"-hide"),ie="".concat(x,"-invisible"),pt="".concat(x,"-modal"),wt="".concat(x,"-move"),ht="".concat(x,"Action"),mt="".concat(x,"Preview"),bt="crop",yt="crop",xt="cropend",Mt="cropmove",Ct="cropstart",Pt="dblclick",It=I?"pointerdown":U?"touchstart":"mousedown",Ut=I?"pointermove":U?"touchmove":"mousemove",qt=I?"pointerup pointercancel":U?"touchend touchcancel":"mouseup",Dt="zoom",ae=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,ne=/^data:/,oe=/^data:image\/jpeg;base64,/,re=/^img|canvas$/i,Qt={viewMode:0,dragMode:bt,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},he=Number.isNaN||X.isNaN;function w(t){return"number"==typeof t&&!he(t)}function Kt(t){return 0<t&&t<1/0}function Bt(t){return void 0===t}function Q(t){return"object"===Ht(t)&&null!==t}var se=Object.prototype.hasOwnProperty;function V(t){if(!Q(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&se.call(i,"isPrototypeOf")}catch(a){return!1}}function N(t){return"function"==typeof t}var ce=Array.prototype.slice;function Zt(t){return Array.from?Array.from(t):ce.call(t)}function D(t,e){return t&&N(e)&&(Array.isArray(t)||w(t.length)?Zt(t).forEach(function(i,a){e.call(t,i,a,t)}):Q(t)&&Object.keys(t).forEach(function(i){e.call(t,t[i],i,t)})),t}var M=Object.assign||function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];return Q(t)&&0<i.length&&i.forEach(function(n){Q(n)&&Object.keys(n).forEach(function(r){t[r]=n[r]})}),t},de=/\.\d*(?:0|9){12}\d*$/;function F(t,e){return e=1<arguments.length&&void 0!==e?e:1e11,de.test(t)?Math.round(t*e)/e:t}var le=/^width|height|left|top|marginLeft|marginTop$/;function j(t,e){var i=t.style;D(e,function(a,n){le.test(n)&&w(a)&&(a="".concat(a,"px")),i[n]=a})}function k(t,e){var i;e&&(w(t.length)?D(t,function(a){k(a,e)}):t.classList?t.classList.add(e):(i=t.className.trim())?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e)}function R(t,e){e&&(w(t.length)?D(t,function(i){R(i,e)}):t.classList?t.classList.remove(e):0<=t.className.indexOf(e)&&(t.className=t.className.replace(e,"")))}function J(t,e,i){e&&(w(t.length)?D(t,function(a){J(a,e,i)}):(i?k:R)(t,e))}var pe=/([a-z\d])([A-Z])/g;function kt(t){return t.replace(pe,"$1-$2").toLowerCase()}function Ot(t,e){return Q(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(kt(e)))}function st(t,e,i){Q(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(kt(e)),i)}var Tt,Et,Gt=/\s\s*/,Vt=(Et=!1,tt&&(Tt=!1,I=function(){},U=Object.defineProperty({},"once",{get:function(){return Et=!0,Tt},set:function(t){Tt=t}}),X.addEventListener("test",I,U),X.removeEventListener("test",I,U)),Et);function Y(t,e,i,a){var n=3<arguments.length&&void 0!==a?a:{},r=i;e.trim().split(Gt).forEach(function(o){var h;Vt||(h=t.listeners)&&h[o]&&h[o][i]&&(r=h[o][i],delete h[o][i],0===Object.keys(h[o]).length&&delete h[o],0===Object.keys(h).length)&&delete t.listeners,t.removeEventListener(o,r,n)})}function L(t,e,i,a){var n=3<arguments.length&&void 0!==a?a:{},r=i;e.trim().split(Gt).forEach(function(o){var h,s;n.once&&!Vt&&(r=function(){delete s[o][i],t.removeEventListener(o,r,n);for(var m=arguments.length,p=new Array(m),c=0;c<m;c++)p[c]=arguments[c];i.apply(t,p)},(s=void 0===(h=t.listeners)?{}:h)[o]||(s[o]={}),s[o][i]&&t.removeEventListener(o,s[o][i],n),s[o][i]=r,t.listeners=s),t.addEventListener(o,r,n)})}function _(t,e,i){var a;return N(Event)&&N(CustomEvent)?a=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(a=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i),t.dispatchEvent(a)}function Ft(t){return{left:(t=t.getBoundingClientRect()).left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var Wt=X.location,me=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Jt(t){return null!==(t=t.match(me))&&(t[1]!==Wt.protocol||t[2]!==Wt.hostname||t[3]!==Wt.port)}function _t(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function ct(n){var e=n.rotate,i=n.scaleX,a=n.scaleY,o=n.translateX,r=(n=n.translateY,[]);return{WebkitTransform:(w(o)&&0!==o&&r.push("translateX(".concat(o,"px)")),w(n)&&0!==n&&r.push("translateY(".concat(n,"px)")),w(e)&&0!==e&&r.push("rotate(".concat(e,"deg)")),w(i)&&1!==i&&r.push("scaleX(".concat(i,")")),w(a)&&1!==a&&r.push("scaleY(".concat(a,")")),o=r.length?r.join(" "):"none"),msTransform:o,transform:o}}function ut(a,e){var i=a.pageX,n={endX:i,endY:a=a.pageY};return e?n:Z({startX:i,startY:a},n)}function P(r,o){var i,a=r.aspectRatio,n=r.height,h=(o=1<arguments.length&&void 0!==o?o:"contain",Kt(r=r.width)),s=Kt(n);return h&&s?(i=n*a,"contain"===o&&r<i||"cover"===o&&i<r?n=r/a:r=n*a):h?n=r/a:s&&(r=n*a),{width:r,height:n}}var te=String.fromCharCode,ue=/^data:.*,/,tt={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,a=this.options,e=this.container,i=this.cropper,n=Number(a.minContainerWidth);a=Number(a.minContainerHeight),k(i,H),R(t,H),n={width:Math.max(e.offsetWidth,0<=n?n:200),height:Math.max(e.offsetHeight,0<=a?a:100)},j(i,{width:(this.containerData=n).width,height:n.height}),k(t,H),R(i,H)},initCanvas:function(){var a,t=this.containerData,o=this.imageData,e=this.options.viewMode,i=(a=Math.abs(o.rotate)%180==90)?o.naturalHeight:o.naturalWidth,n=t.width,r=t.height;t.height*(o=i/(a=a?o.naturalWidth:o.naturalHeight))>t.width?3===e?n=t.height*o:r=t.width/o:3===e?r=t.width/o:n=t.height*o,this.canvasData=o={aspectRatio:o,naturalWidth:i,naturalHeight:a,width:n,height:r},this.limited=1===e||2===e,this.limitCanvas(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.left=(t.width-o.width)/2,o.top=(t.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCanvasData=M({},o)},limitCanvas:function(t,e){var i=this.options,a=this.containerData,n=this.canvasData,r=this.cropBoxData,o=i.viewMode,h=n.aspectRatio,s=this.cropped&&r;t&&(t=Number(i.minCanvasWidth)||0,i=Number(i.minCanvasHeight)||0,1<o?(t=Math.max(t,a.width),i=Math.max(i,a.height),3===o&&(t<i*h?t=i*h:i=t/h)):0<o&&(t?t=Math.max(t,s?r.width:0):i?i=Math.max(i,s?r.height:0):s&&((t=r.width)<(i=r.height)*h?t=i*h:i=t/h)),t=(h=P({aspectRatio:h,width:t,height:i})).width,i=h.height,n.minWidth=t,n.minHeight=i,n.maxWidth=1/0,n.maxHeight=1/0),e&&((s?0:1)<o?(h=a.width-n.width,t=a.height-n.height,n.minLeft=Math.min(0,h),n.minTop=Math.min(0,t),n.maxLeft=Math.max(0,h),n.maxTop=Math.max(0,t),s&&this.limited&&(n.minLeft=Math.min(r.left,r.left+(r.width-n.width)),n.minTop=Math.min(r.top,r.top+(r.height-n.height)),n.maxLeft=r.left,n.maxTop=r.top,2===o)&&(n.width>=a.width&&(n.minLeft=Math.min(0,h),n.maxLeft=Math.max(0,h)),n.height>=a.height)&&(n.minTop=Math.min(0,t),n.maxTop=Math.max(0,t))):(n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=a.width,n.maxTop=a.height))},renderCanvas:function(t,e){var i,a,n,r,o=this.canvasData,h=this.imageData;e&&(h=(e={width:h.naturalWidth*Math.abs(h.scaleX||1),height:h.naturalHeight*Math.abs(h.scaleY||1),degree:h.rotate||0}).width,r=e.height,e=e.degree,i=90==(e=Math.abs(e)%180)?{width:r,height:h}:(a=e%90*Math.PI/180,i=Math.sin(a),n=h*(a=Math.cos(a))+r*i,h=h*i+r*a,90<e?{width:h,height:n}:{width:n,height:h}),a=o.width*((r=i.width)/o.naturalWidth),n=o.height*((e=i.height)/o.naturalHeight),o.left-=(a-o.width)/2,o.top-=(n-o.height)/2,o.width=a,o.height=n,o.aspectRatio=r/e,o.naturalWidth=r,o.naturalHeight=e,this.limitCanvas(!0,!1)),(o.width>o.maxWidth||o.width<o.minWidth)&&(o.left=o.oldLeft),(o.height>o.maxHeight||o.height<o.minHeight)&&(o.top=o.oldTop),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),this.limitCanvas(!1,!0),o.left=Math.min(Math.max(o.left,o.minLeft),o.maxLeft),o.top=Math.min(Math.max(o.top,o.minTop),o.maxTop),o.oldLeft=o.left,o.oldTop=o.top,j(this.canvas,M({width:o.width,height:o.height},ct({translateX:o.left,translateY:o.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,i=this.imageData,a=i.naturalWidth*(e.width/e.naturalWidth),n=i.naturalHeight*(e.height/e.naturalHeight);M(i,{width:a,height:n,left:(e.width-a)/2,top:(e.height-n)/2}),j(this.image,M({width:i.width,height:i.height},ct(M({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.canvasData,e=(i=this.options).aspectRatio||i.initialAspectRatio,i=Number(i.autoCropArea)||.8,a={width:t.width,height:t.height};e&&(t.height*e>t.width?a.height=a.width/e:a.width=a.height*e),this.cropBoxData=a,this.limitCropBox(!0,!0),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),a.width=Math.max(a.minWidth,a.width*i),a.height=Math.max(a.minHeight,a.height*i),a.left=t.left+(t.width-a.width)/2,a.top=t.top+(t.height-a.height)/2,a.oldLeft=a.left,a.oldTop=a.top,this.initialCropBoxData=M({},a)},limitCropBox:function(t,e){var i,a,n=this.options,r=this.containerData,o=this.canvasData,h=this.cropBoxData,s=this.limited,m=n.aspectRatio;t&&(t=Number(n.minCropBoxWidth)||0,n=Number(n.minCropBoxHeight)||0,i=s?Math.min(r.width,o.width,o.width+o.left,r.width-o.left):r.width,a=s?Math.min(r.height,o.height,o.height+o.top,r.height-o.top):r.height,t=Math.min(t,r.width),n=Math.min(n,r.height),m&&(t&&n?t<n*m?n=t/m:t=n*m:t?n=t/m:n&&(t=n*m),i<a*m?a=i/m:i=a*m),h.minWidth=Math.min(t,i),h.minHeight=Math.min(n,a),h.maxWidth=i,h.maxHeight=a),e&&(s?(h.minLeft=Math.max(0,o.left),h.minTop=Math.max(0,o.top),h.maxLeft=Math.min(r.width,o.left+o.width)-h.width,h.maxTop=Math.min(r.height,o.top+o.height)-h.height):(h.minLeft=0,h.minTop=0,h.maxLeft=r.width-h.width,h.maxTop=r.height-h.height))},renderCropBox:function(){var t=this.options,e=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&st(this.face,ht,i.width>=e.width&&i.height>=e.height?"move":"all"),j(this.cropBox,M({width:i.width,height:i.height},ct({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),_(this.element,yt,this.getData())}},fe=(I={initPreview:function(){var t=this.element,e=this.crossOrigin,i=this.options.preview,a=e?this.crossOriginUrl:this.url,n=t.alt||"The image to preview",r=document.createElement("img");e&&(r.crossOrigin=e),r.src=a,r.alt=n,this.viewBox.appendChild(r),this.viewBoxImage=r,i&&("string"==typeof(r=i)?r=t.ownerDocument.querySelectorAll(i):i.querySelector&&(r=[i]),D(this.previews=r,function(o){var h=document.createElement("img");st(o,mt,{width:o.offsetWidth,height:o.offsetHeight,html:o.innerHTML}),e&&(h.crossOrigin=e),h.src=a,h.alt=n,h.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',o.innerHTML="",o.appendChild(h)}))},resetPreview:function(){D(this.previews,function(i){var e;if(Q((j(i,{width:(e=Ot(i,mt)).width,height:e.height}),i.innerHTML=e.html,e=i)[i=mt]))try{delete e[i]}catch(a){e[i]=void 0}else if(e.dataset)try{delete e.dataset[i]}catch(a){e.dataset[i]=void 0}else e.removeAttribute("data-".concat(kt(i)))})},preview:function(){var t=this.imageData,e=this.canvasData,i=this.cropBoxData,a=i.width,n=i.height,r=t.width,o=t.height,h=i.left-e.left-t.left,s=i.top-e.top-t.top;this.cropped&&!this.disabled&&(j(this.viewBoxImage,M({width:r,height:o},ct(M({translateX:-h,translateY:-s},t)))),D(this.previews,function(m){var c,p=(c=Ot(m,mt)).width,g=p,f=c=c.height,d=1;a&&(f=n*(d=p/a)),n&&c<f&&(g=a*(d=c/n),f=c),j(m,{width:g,height:f}),j(m.getElementsByTagName("img")[0],M({width:r*d,height:o*d},ct(M({translateX:-h*d,translateY:-s*d},t))))}))}},U={bind:function(){var t=this.element,e=this.options,i=this.cropper;N(e.cropstart)&&L(t,Ct,e.cropstart),N(e.cropmove)&&L(t,Mt,e.cropmove),N(e.cropend)&&L(t,xt,e.cropend),N(e.crop)&&L(t,yt,e.crop),N(e.zoom)&&L(t,Dt,e.zoom),L(i,It,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&L(i,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&L(i,Pt,this.onDblclick=this.dblclick.bind(this)),L(t.ownerDocument,Ut,this.onCropMove=this.cropMove.bind(this)),L(t.ownerDocument,qt,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&L(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,i=this.cropper;N(e.cropstart)&&Y(t,Ct,e.cropstart),N(e.cropmove)&&Y(t,Mt,e.cropmove),N(e.cropend)&&Y(t,xt,e.cropend),N(e.crop)&&Y(t,yt,e.crop),N(e.zoom)&&Y(t,Dt,e.zoom),Y(i,It,this.onCropStart),e.zoomable&&e.zoomOnWheel&&Y(i,"wheel",this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Y(i,Pt,this.onDblclick),Y(t.ownerDocument,Ut,this.onCropMove),Y(t.ownerDocument,qt,this.onCropEnd),e.responsive&&Y(window,"resize",this.onResize)}},{resize:function(){var t,e,i,a,n,r,o;this.disabled||(t=this.options,i=(a=this.container).offsetWidth/(e=this.containerData).width,a=a.offsetHeight/e.height,1!=(n=Math.abs(i-1)>Math.abs(a-1)?i:a)&&(t.restore&&(r=this.getCanvasData(),o=this.getCropBoxData()),this.render(),t.restore)&&(this.setCanvasData(D(r,function(h,s){r[s]=h*n})),this.setCropBoxData(D(o,function(h,s){o[s]=h*n}))))},dblclick:function(){var t,e;this.disabled||"none"===this.options.dragMode||this.setDragMode((e=vt,((t=this.dragBox).classList?t.classList.contains(e):-1<t.className.indexOf(e))?"move":bt))},wheel:function(t){var e=this,i=Number(this.options.wheelZoomRatio)||.1,a=1;this.disabled||(t.preventDefault(),this.wheeling)||(this.wheeling=!0,setTimeout(function(){e.wheeling=!1},50),t.deltaY?a=0<t.deltaY?1:-1:t.wheelDelta?a=-t.wheelDelta/120:t.detail&&(a=0<t.detail?1:-1),this.zoom(-a*i,t))},cropStart:function(t){var e,i=t.buttons,a=t.button;this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(w(i)&&1!==i||w(a)&&0!==a||t.ctrlKey)||(i=this.options,e=this.pointers,t.changedTouches?D(t.changedTouches,function(n){e[n.identifier]=ut(n)}):e[t.pointerId||0]=ut(t),a=1<Object.keys(e).length&&i.zoomable&&i.zoomOnTouch?"zoom":Ot(t.target,ht),ae.test(a)&&!1!==_(this.element,Ct,{originalEvent:t,action:a})&&(t.preventDefault(),this.action=a,this.cropping=!1,"crop"===a)&&(this.cropping=!0,k(this.dragBox,pt)))},cropMove:function(t){var e,i=this.action;!this.disabled&&i&&(e=this.pointers,t.preventDefault(),!1!==_(this.element,Mt,{originalEvent:t,action:i}))&&(t.changedTouches?D(t.changedTouches,function(a){M(e[a.identifier]||{},ut(a,!0))}):M(e[t.pointerId||0]||{},ut(t,!0)),this.change(t))},cropEnd:function(t){var e,i;this.disabled||(e=this.action,i=this.pointers,t.changedTouches?D(t.changedTouches,function(a){delete i[a.identifier]}):delete i[t.pointerId||0],e&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,J(this.dragBox,pt,this.cropped&&this.options.modal)),_(this.element,xt,{originalEvent:t,action:e})))}}),ve={change:function(t){function e(O){switch(O){case q:y+l.x>W&&(l.x=W-y);break;case $:g+l.x<b&&(l.x=b-g);break;case A:f+l.y<B&&(l.y=B-f);break;case G:v+l.y>T&&(l.y=T-v)}}var i,a,n,o=this.canvasData,h=this.containerData,s=this.cropBoxData,m=this.pointers,p=this.action,c=this.options.aspectRatio,g=s.left,f=s.top,d=s.width,u=s.height,y=g+d,v=f+u,b=0,B=0,W=h.width,T=h.height,C=!0,z=(!c&&t.shiftKey&&(c=d&&u?d/u:1),this.limited&&(B=s.minTop,W=(b=s.minLeft)+Math.min(h.width,o.width,o.left+o.width),T=B+Math.min(h.height,o.height,o.top+o.height)),m[Object.keys(m)[0]]),l={x:z.endX-z.startX,y:z.endY-z.startY};switch(p){case"all":g+=l.x,f+=l.y;break;case q:0<=l.x&&(W<=y||c&&(f<=B||T<=v))?C=!1:(e(q),(d+=l.x)<0&&(p=$,g-=d=-d),c&&(f+=(s.height-(u=d/c))/2));break;case A:l.y<=0&&(f<=B||c&&(g<=b||W<=y))?C=!1:(e(A),f+=l.y,(u-=l.y)<0&&(p=G,f-=u=-u),c&&(g+=(s.width-(d=u*c))/2));break;case $:l.x<=0&&(g<=b||c&&(f<=B||T<=v))?C=!1:(e($),g+=l.x,(d-=l.x)<0&&(p=q,g-=d=-d),c&&(f+=(s.height-(u=d/c))/2));break;case G:0<=l.y&&(T<=v||c&&(g<=b||W<=y))?C=!1:(e(G),(u+=l.y)<0&&(p=A,f-=u=-u),c&&(g+=(s.width-(d=u*c))/2));break;case at:if(c){if(l.y<=0&&(f<=B||W<=y)){C=!1;break}e(A),f+=l.y,d=(u-=l.y)*c}else e(A),e(q),!(0<=l.x)||y<W?d+=l.x:l.y<=0&&f<=B&&(C=!1),(!(l.y<=0)||B<f)&&(u-=l.y,f+=l.y);d<0&&u<0?(p=rt,f-=u=-u,g-=d=-d):d<0?(p=nt,g-=d=-d):u<0&&(p=ot,f-=u=-u);break;case nt:if(c){if(l.y<=0&&(f<=B||g<=b)){C=!1;break}e(A),f+=l.y,g+=s.width-(d=(u-=l.y)*c)}else e(A),e($),!(l.x<=0)||b<g?(d-=l.x,g+=l.x):l.y<=0&&f<=B&&(C=!1),(!(l.y<=0)||B<f)&&(u-=l.y,f+=l.y);d<0&&u<0?(p=ot,f-=u=-u,g-=d=-d):d<0?(p=at,g-=d=-d):u<0&&(p=rt,f-=u=-u);break;case rt:if(c){if(l.x<=0&&(g<=b||T<=v)){C=!1;break}e($),g+=l.x,u=(d-=l.x)/c}else e(G),e($),!(l.x<=0)||b<g?(d-=l.x,g+=l.x):0<=l.y&&T<=v&&(C=!1),(!(0<=l.y)||v<T)&&(u+=l.y);d<0&&u<0?(p=at,f-=u=-u,g-=d=-d):d<0?(p=ot,g-=d=-d):u<0&&(p=nt,f-=u=-u);break;case ot:if(c){if(0<=l.x&&(W<=y||T<=v)){C=!1;break}e(q),u=(d+=l.x)/c}else e(G),e(q),!(0<=l.x)||y<W?d+=l.x:0<=l.y&&T<=v&&(C=!1),(!(0<=l.y)||v<T)&&(u+=l.y);d<0&&u<0?(p=nt,f-=u=-u,g-=d=-d):d<0?(p=rt,g-=d=-d):u<0&&(p=at,f-=u=-u);break;case"move":this.move(l.x,l.y),C=!1;break;case"zoom":this.zoom((a=Z({},i=m),n=0,D(i,function(O,E){delete a[E],D(a,function(K){var dt=Math.abs(O.startX-K.startX),lt=Math.abs(O.startY-K.startY),et=Math.abs(O.endX-K.endX);K=Math.abs(O.endY-K.endY),dt=Math.sqrt(dt*dt+lt*lt),lt=(Math.sqrt(et*et+K*K)-dt)/dt,Math.abs(lt)>Math.abs(n)&&(n=lt)})}),n),t),C=!1;break;case"crop":l.x&&l.y?(i=Ft(this.cropper),g=z.startX-i.left,f=z.startY-i.top,d=s.minWidth,u=s.minHeight,0<l.x?p=0<l.y?ot:at:l.x<0&&(g-=d,p=0<l.y?rt:nt),l.y<0&&(f-=u),this.cropped||(R(this.cropBox,H),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))):C=!1}C&&(s.width=d,s.height=u,s.left=g,s.top=f,this.action=p,this.renderCropBox()),D(m,function(O){O.startX=O.endX,O.startY=O.endY})}},we={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&k(this.dragBox,pt),R(this.cropBox,H),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=M({},this.initialImageData),this.canvasData=M({},this.initialCanvasData),this.cropBoxData=M({},this.initialCropBoxData),this.renderCanvas(),this.cropped)&&this.renderCropBox(),this},clear:function(){return this.cropped&&!this.disabled&&(M(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),R(this.dragBox,pt),k(this.cropBox,H)),this},replace:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,D(this.previews,function(i){i.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,R(this.cropper,Rt)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,k(this.cropper,Rt)),this},destroy:function(){var t=this.element;return t[x]&&(t[x]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate()),this},move:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,i=(a=this.canvasData).left,a=a.top;return this.moveTo(Bt(t)?t:i+Number(t),Bt(e)?e:a+Number(e))},moveTo:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,a=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(w(t)&&(i.left=t,a=!0),w(e)&&(i.top=e,a=!0),a)&&this.renderCanvas(!0),this},zoom:function(t,e){var i=this.canvasData;return t=Number(t),this.zoomTo(i.width*(t=t<0?1/(1-t):1+t)/i.naturalWidth,null,e)},zoomTo:function(t,e,i){var a,n,r,o=this.options,h=this.canvasData,s=h.width,m=h.height,p=h.naturalWidth,c=h.naturalHeight;if(0<=(t=Number(t))&&this.ready&&!this.disabled&&o.zoomable){if(o=p*t,c*=t,!1===_(this.element,Dt,{ratio:t,oldRatio:s/p,originalEvent:i}))return this;i?(t=this.pointers,p=Ft(this.cropper),t=t&&Object.keys(t).length?(r=n=a=0,D(t,function(d){a+=d.startX,n+=d=d.startY,r+=1}),{pageX:a/=r,pageY:n/=r}):{pageX:i.pageX,pageY:i.pageY},h.left-=(t.pageX-p.left-h.left)/s*(o-s),h.top-=(t.pageY-p.top-h.top)/m*(c-m)):V(e)&&w(e.x)&&w(e.y)?(h.left-=(e.x-h.left)/s*(o-s),h.top-=(e.y-h.top)/m*(c-m)):(h.left-=(o-s)/2,h.top-=(c-m)/2),h.width=o,h.height=c,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return w(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,w(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(w(e)?e:1,t)},scale:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData,a=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(w(t)&&(i.scaleX=t,a=!0),w(e)&&(i.scaleY=e,a=!0),a)&&this.renderCanvas(!0,!0),this},getData:function(){var t,e,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0],a=this.options,n=this.imageData,r=this.canvasData,o=this.cropBoxData;return this.ready&&this.cropped?(e=n.width/n.naturalWidth,D(t={x:o.left-r.left,y:o.top-r.top,width:o.width,height:o.height},function(h,s){t[s]=h/e}),i&&(r=Math.round(t.y+t.height),o=Math.round(t.x+t.width),t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=o-t.x,t.height=r-t.y)):t={x:0,y:0,width:0,height:0},a.rotatable&&(t.rotate=n.rotate||0),a.scalable&&(t.scaleX=n.scaleX||1,t.scaleY=n.scaleY||1),t},setData:function(t){var e,i=this.options,a=this.imageData,n=this.canvasData,r={};return this.ready&&!this.disabled&&V(t)&&(e=!1,i.rotatable&&w(t.rotate)&&t.rotate!==a.rotate&&(a.rotate=t.rotate,e=!0),i.scalable&&(w(t.scaleX)&&t.scaleX!==a.scaleX&&(a.scaleX=t.scaleX,e=!0),w(t.scaleY))&&t.scaleY!==a.scaleY&&(a.scaleY=t.scaleY,e=!0),e&&this.renderCanvas(!0,!0),i=a.width/a.naturalWidth,w(t.x)&&(r.left=t.x*i+n.left),w(t.y)&&(r.top=t.y*i+n.top),w(t.width)&&(r.width=t.width*i),w(t.height)&&(r.height=t.height*i),this.setCropBoxData(r)),this},getContainerData:function(){return this.ready?M({},this.containerData):{}},getImageData:function(){return this.sized?M({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&D(["left","top","width","height","naturalWidth","naturalHeight"],function(i){e[i]=t[i]}),e},setCanvasData:function(t){var e=this.canvasData,i=e.aspectRatio;return this.ready&&!this.disabled&&V(t)&&(w(t.left)&&(e.left=t.left),w(t.top)&&(e.top=t.top),w(t.width)?(e.width=t.width,e.height=t.width/i):w(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return(t=this.ready&&this.cropped?{left:e.left,top:e.top,width:e.width,height:e.height}:t)||{}},setCropBoxData:function(t){var e,i,a=this.cropBoxData,n=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&V(t)&&(w(t.left)&&(a.left=t.left),w(t.top)&&(a.top=t.top),w(t.width)&&t.width!==a.width&&(e=!0,a.width=t.width),w(t.height)&&t.height!==a.height&&(i=!0,a.height=t.height),n&&(e?a.height=a.width/n:i&&(a.width=a.height*n)),this.renderCropBox()),this},getCroppedCanvas:function(){var t,e,i,a,n,r,o,h,s,m,p,c,g,f,d,u,y,v,b,B,W,T,C,z,l,O,E,S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.ready&&window.HTMLCanvasElement?(d=this.image,u=(c=this.imageData).aspectRatio,e=c.naturalWidth,n=c.naturalHeight,m=void 0===(m=c.rotate)?0:m,p=void 0===(p=c.scaleX)?1:p,c=void 0===(c=c.scaleY)?1:c,i=(a=O=this.canvasData).aspectRatio,h=a.naturalWidth,a=a.naturalHeight,o=void 0===(o=(v=S).fillColor)?"transparent":o,g=void 0===(g=v.imageSmoothingEnabled)||g,f=void 0===(f=v.imageSmoothingQuality)?"low":f,r=void 0===(r=v.maxWidth)?1/0:r,E=void 0===(E=v.maxHeight)?1/0:E,t=void 0===(t=v.minWidth)?0:t,v=void 0===(v=v.minHeight)?0:v,y=(b=document.createElement("canvas")).getContext("2d"),s=P({aspectRatio:i,width:r,height:E}),i=P({aspectRatio:i,width:t,height:v},"cover"),h=Math.min(s.width,Math.max(i.width,h)),s=Math.min(s.height,Math.max(i.height,a)),i=P({aspectRatio:u,width:r,height:E}),a=P({aspectRatio:u,width:t,height:v},"cover"),u=[-(r=Math.min(i.width,Math.max(a.width,e)))/2,-(E=Math.min(i.height,Math.max(a.height,n)))/2,r,E],b.width=F(h),b.height=F(s),y.fillStyle=o,y.fillRect(0,0,h,s),y.save(),y.translate(h/2,s/2),y.rotate(m*Math.PI/180),y.scale(p,c),y.imageSmoothingEnabled=g,y.imageSmoothingQuality=f,y.drawImage.apply(y,[d].concat(Lt(u.map(function(et){return Math.floor(F(et))})))),y.restore(),t=b,this.cropped?(e=(v=this.getData()).x,i=v.y,a=v.width,n=v.height,1!=(r=t.width/Math.floor(O.naturalWidth))&&(e*=r,i*=r,a*=r,n*=r),o=P({aspectRatio:E=a/n,width:S.maxWidth||1/0,height:S.maxHeight||1/0}),h=P({aspectRatio:E,width:S.minWidth||0,height:S.minHeight||0},"cover"),m=(s=P({aspectRatio:E,width:S.width||(1!=r?t.width:a),height:S.height||(1!=r?t.height:n)})).width,p=s.height,m=Math.min(o.width,Math.max(h.width,m)),p=Math.min(o.height,Math.max(h.height,p)),g=(c=document.createElement("canvas")).getContext("2d"),c.width=F(m),c.height=F(p),g.fillStyle=S.fillColor||"transparent",g.fillRect(0,0,m,p),d=S.imageSmoothingQuality,g.imageSmoothingEnabled=void 0===(f=S.imageSmoothingEnabled)||f,d&&(g.imageSmoothingQuality=d),u=t.width,y=t.height,b=i,(v=e)<=-a||u<v?z=T=B=v=0:v<=0?(T=-v,v=0,z=B=Math.min(u,a+v)):v<=u&&(T=0,z=B=Math.min(a,u-v)),B<=0||b<=-n||y<b?l=C=W=b=0:b<=0?(C=-b,b=0,l=W=Math.min(y,n+b)):b<=y&&(C=0,l=W=Math.min(n,y-b)),O=[v,b,B,W],0<z&&0<l&&O.push(T*(E=m/a),C*E,z*E,l*E),g.drawImage.apply(g,[t].concat(Lt(O.map(function(et){return Math.floor(F(et))})))),c):t):null},setAspectRatio:function(t){var e=this.options;return this.disabled||Bt(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped)&&this.renderCropBox()),this},setDragMode:function(t){var e,i,a=this.options,n=this.dragBox,r=this.face;return this.ready&&!this.disabled&&(i=a.movable&&"move"===t,a.dragMode=t=(e=t===bt)||i?t:"none",st(n,ht,t),J(n,vt,e),J(n,wt,i),a.cropBoxMovable||(st(r,ht,t),J(r,vt,e),J(r,wt,i))),this}},be=X.Cropper,ee=function(){function t(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=this,h=t;if(!(o instanceof h))throw new TypeError("Cannot call a class as a function");if(!n||!re.test(n.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=n,this.options=M({},Qt,V(r)&&r),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var e,i,a;return e=t,a=[{key:"noConflict",value:function(){return window.Cropper=be,t}},{key:"setDefaults",value:function(n){M(Qt,V(n)&&n)}}],(i=[{key:"init",value:function(){var n,r=this.element,o=r.tagName.toLowerCase();if(!r[x]){if(r[x]=this,"img"===o){if(this.isImg=!0,n=r.getAttribute("src")||"",!(this.originalUrl=n))return;n=r.src}else"canvas"===o&&window.HTMLCanvasElement&&(n=r.toDataURL());this.load(n)}}},{key:"load",value:function(n){var r,o,h,s,m,p,c=this;n&&(this.url=n,this.imageData={},r=this.element,(o=this.options).rotatable||o.scalable||(o.checkOrientation=!1),o.checkOrientation&&window.ArrayBuffer?ne.test(n)?oe.test(n)?this.read((p=(p=n).replace(ue,""),h=atob(p),p=new ArrayBuffer(h.length),D(s=new Uint8Array(p),function(g,f){s[f]=h.charCodeAt(f)}),p)):this.clone():(m=new XMLHttpRequest,p=this.clone.bind(this),this.reloading=!0,(this.xhr=m).onabort=p,m.onerror=p,m.ontimeout=p,m.onprogress=function(){"image/jpeg"!==m.getResponseHeader("content-type")&&m.abort()},m.onload=function(){c.read(m.response)},m.onloadend=function(){c.reloading=!1,c.xhr=null},o.checkCrossOrigin&&Jt(n)&&r.crossOrigin&&(n=_t(n)),m.open("GET",n,!0),m.responseType="arraybuffer",m.withCredentials="use-credentials"===r.crossOrigin,m.send()):this.clone())}},{key:"read",value:function(n){var r=this.options,o=this.imageData,h=function ge(t){var e,i,a,n,r,o,h,s=new DataView(t);try{if(255===s.getUint8(0)&&216===s.getUint8(1))for(var m=s.byteLength,p=2;p+1<m;){if(255===s.getUint8(p)&&225===s.getUint8(p+1)){i=p;break}p+=1}if(a=i&&(n=i+10,"Exif"===function(d,u,y){var v="";y+=u;for(var b=u;b<y;b+=1)v+=te(d.getUint8(b));return v}(s,i+4,4))&&((h=18761===(r=s.getUint16(n)))||19789===r)&&42===s.getUint16(n+2,h)&&8<=(o=s.getUint32(n+4,h))?n+o:a)for(var c,g=s.getUint16(a,h),f=0;f<g;f+=1)if(274===s.getUint16(c=a+12*f+2,h)){e=s.getUint16(c+=8,h),s.setUint16(c,1,h);break}}catch(d){e=1}return e}(n),s=0,m=1,p=1;1<h&&(this.url=function(c,g){for(var f=[],d=new Uint8Array(c);0<d.length;)f.push(te.apply(null,Zt(d.subarray(0,8192)))),d=d.subarray(8192);return"data:".concat("image/jpeg",";base64,").concat(btoa(f.join("")))}(n),s=(n=function(c){var g=0,f=1,d=1;switch(c){case 2:f=-1;break;case 3:g=-180;break;case 4:d=-1;break;case 5:g=90,d=-1;break;case 6:g=90;break;case 7:g=90,f=-1;break;case 8:g=-90}return{rotate:g,scaleX:f,scaleY:d}}(h)).rotate,m=n.scaleX,p=n.scaleY),r.rotatable&&(o.rotate=s),r.scalable&&(o.scaleX=m,o.scaleY=p),this.clone()}},{key:"clone",value:function(){var n=this.element,r=this.url,o=n.crossOrigin,h=r,s=(this.options.checkCrossOrigin&&Jt(r)&&(o=o||"anonymous",h=_t(r)),this.crossOrigin=o,this.crossOriginUrl=h,document.createElement("img"));o&&(s.crossOrigin=o),s.src=h||r,s.alt=n.alt||"The image to crop",(this.image=s).onload=this.start.bind(this),s.onerror=this.stop.bind(this),k(s,St),n.parentNode.insertBefore(s,n.nextSibling)}},{key:"start",value:function(){function n(p,c){M(h.imageData,{naturalWidth:p,naturalHeight:c,aspectRatio:p/c}),h.initialImageData=M({},h.imageData),h.sizing=!1,h.sized=!0,h.build()}var r,o,h=this,s=this.image,m=(s.onload=null,s.onerror=null,this.sizing=!0,X.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(X.navigator.userAgent));s.naturalWidth&&!m?n(s.naturalWidth,s.naturalHeight):(r=document.createElement("img"),o=document.body||document.documentElement,(this.sizingImage=r).onload=function(){n(r.width,r.height),m||o.removeChild(r)},r.src=s.src,m||(r.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(r)))}},{key:"stop",value:function(){var n=this.image;n.onload=null,n.onerror=null,n.parentNode.removeChild(n),this.image=null}},{key:"build",value:function(){var n,r,o,h,s,m,p,c,g;this.sized&&!this.ready&&(r=this.options,o=this.image,h=(n=this.element).parentNode,(s=document.createElement("div")).innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',m=(s=s.querySelector(".".concat(x,"-container"))).querySelector(".".concat(x,"-canvas")),p=s.querySelector(".".concat(x,"-drag-box")),g=(c=s.querySelector(".".concat(x,"-crop-box"))).querySelector(".".concat(x,"-face")),this.container=h,this.cropper=s,this.canvas=m,this.dragBox=p,this.cropBox=c,this.viewBox=s.querySelector(".".concat(x,"-view-box")),this.face=g,m.appendChild(o),k(n,H),h.insertBefore(s,n.nextSibling),R(o,St),this.initPreview(),this.bind(),r.initialAspectRatio=Math.max(0,r.initialAspectRatio)||NaN,r.aspectRatio=Math.max(0,r.aspectRatio)||NaN,r.viewMode=Math.max(0,Math.min(3,Math.round(r.viewMode)))||0,k(c,H),r.guides||k(c.getElementsByClassName("".concat(x,"-dashed")),H),r.center||k(c.getElementsByClassName("".concat(x,"-center")),H),r.background&&k(s,"".concat(x,"-bg")),r.highlight||k(g,ie),r.cropBoxMovable&&(k(g,wt),st(g,ht,"all")),r.cropBoxResizable||(k(c.getElementsByClassName("".concat(x,"-line")),H),k(c.getElementsByClassName("".concat(x,"-point")),H)),this.render(),this.ready=!0,this.setDragMode(r.dragMode),r.autoCrop&&this.crop(),this.setData(r.data),N(r.ready)&&L(n,"ready",r.ready,{once:!0}),_(n,"ready"))}},{key:"unbuild",value:function(){var n;this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),(n=this.cropper.parentNode)&&n.removeChild(this.cropper),R(this.element,H))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&Nt(e.prototype,i),a&&Nt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();return M(ee.prototype,tt,I,U,fe,ve,we),ee});